# Subtree of Another Tree

[é¡Œç›®é€£çµ](https://leetcode.com/problems/subtree-of-another-tree/)

## é¡Œç›®æè¿°
åŸæ–‡ï¼š

Given the roots of two binary trees `root` and `subRoot`, return `true` if there is a subtree of `root` with the same structure and node values of `subRoot` and `false` otherwise.

A subtree of a binary tree `tree` is a tree that consists of a node in `tree` and all of this node's descendants. The tree `tree` could also be considered as a subtree of itself.

----

GPT 4 ç¿»è­¯ï¼š

çµ¦å®šå…©å€‹äºŒå…ƒæ¨¹çš„æ ¹ç¯€é» `root` å’Œ `subRoot`ï¼Œå¦‚æœ `root` æœ‰ä¸€å€‹å­æ¨¹çš„çµæ§‹å’Œç¯€é»å€¼èˆ‡ `subRoot` ç›¸åŒï¼Œå‰‡è¿”å› `true`ï¼Œå¦å‰‡è¿”å› `falseã€‚`

äºŒå…ƒæ¨¹ `tree` çš„ä¸€å€‹å­æ¨¹æ˜¯ç”± `tree` ä¸­çš„ä¸€å€‹ç¯€é»åŠå…¶æ‰€æœ‰å¾Œä»£ç¯€é»çµ„æˆçš„æ¨¹ã€‚æ¨¹ `tree` ä¹Ÿå¯ä»¥è¢«è¦–ç‚ºå…¶è‡ªèº«çš„ä¸€å€‹å­æ¨¹ã€‚

----

Example 1

![Example 1](example1.jpeg)

```
Input: root = [3,4,5,1,2], subRoot = [4,1,2]
Output: true
```

Example 2

![Example 2](example2.jpeg)

```
Input: root = [3,4,5,1,2,null,null,null,null,0], subRoot = [4,1,2]
Output: false
```

Constraints:

* The number of nodes in the `root` tree is in the range `[1, 2000]`.
* The number of nodes in the `subRoot` tree is in the range `[1, 1000]`.
* `-10^4 <= root.val <= 10^4`
* `-10^4 <= subRoot.val <= 10^4`


## æ€è·¯ 1: DFS

è¦åˆ¤æ–·å¤§æ¨¹ç•¶ä¸­æ˜¯ä¸æ˜¯åŒ…å«å­æ¨¹ï¼Œå¯ä»¥åšçš„æ–¹æ³•æ˜¯å…ˆåœ¨å¤§æ¨¹çš„ç¯€é»ä¸Šåš DFSï¼Œä¹Ÿå°±æ˜¯èªªï¼š  
1. å¦‚æœç™¼ç¾`å¤§æ¨¹çš„ root` = `å°æ¨¹çš„ root`ï¼Œé‚£éº¼å°±éè¿´å¾—å»æ‰¾å…¶å·¦å³å­æ¨¹æ˜¯å¦ä¹Ÿç›¸ç­‰ã€‚
2. ç›´åˆ°æ¯”å°å®Œéƒ½ä¸€æ¨¡ä¸€æ¨£å°±è¿”å› `true`ï¼Œå¦å‰‡å°±è¿”å› `false`ã€‚

ä»¥ä¸Šçš„åšæ³•æ‡‰è©²æ˜¯å¯è¡Œçš„ï¼Œå› ç‚ºåœ¨ [100. Same Tree](../100.%20Same%20Tree/) æˆ‘å€‘ç·´ç¿’éï¼Œæ‰‹æ³•å¾ˆé¡ä¼¼ï¼Œè€Œé€™é¡Œé€™æ¨£åšçš„æ™‚é–“è¤‡é›œåº¦ç‚º `O(NM)`ï¼Œ`N` ç‚ºå¤§æ¨¹çš„ç¯€é»æ•¸ã€ `M` ç‚ºå°æ¨¹çš„ç¯€é»æ•¸ã€‚


**æ–¹æ³• 1: DFS**

* æ­¥é©Ÿ
    1. å»ºç«‹ä¸€å€‹å’Œ [100. Same Tree](../100.%20Same%20Tree/) ä¸€æ¨£çš„å‡½å¼ã€‚
    2. ç²’ç”¨ä¸€å€‹éè¿´å»åˆ¤æ–·ï¼š
       1. `isSameTree(å¤§æ¨¹çš„ç¯€é», å°æ¨¹çš„ root)` ç›¸ç­‰å°±è¿”å› `True`
       2. å…¶ä»–ç‹€æ³å‰‡ç¹¼çºŒéè¿´å¾—å»æ‰¾ `dfs(å¤§æ¨¹çš„å·¦å­æ¨¹, å°æ¨¹çš„ root)`ã€`dfs(å¤§æ¨¹çš„å³å­æ¨¹, å°æ¨¹çš„ root)`
        
* è¤‡é›œåº¦
    * æ™‚é–“è¤‡é›œåº¦: O(NM)
    * ç©ºé–“è¤‡é›œåº¦: O(N + M) # éè¿´çš„æ·±åº¦
    * `N` ç‚ºå¤§æ¨¹çš„ç¯€é»æ•¸ã€ `M` ç‚ºå°æ¨¹çš„ç¯€é»æ•¸ã€‚


## æ€è·¯ 2:

çœ‹åˆ°é¡ä¼¼ N å¹³æ–¹çš„æ™‚é–“è¤‡é›œåº¦ï¼Œé€šå¸¸éƒ½æœ‰æ©Ÿæœƒå†å„ªåŒ–ï¼Œä»¥é€™é¡Œä¾†èªªï¼Œåˆ°åº•å¦‚ä½•å†æ›´å„ªåŒ–å‘¢ï¼Ÿé€™æ™‚å€™å¯ä»¥é€™æ¨£æ€è€ƒï¼š    
1. å¦‚æœè¦å†æ›´å„ªåŒ–ï¼Œä»£è¡¨æˆ‘å€‘å¸Œæœ›æƒéä¸€æ¬¡å¤§æ¨¹ O(N)ã€å†æƒéä¸€æ¬¡å°æ¨¹ O(M) å°±èƒ½åšå®Œã€‚
2. æƒéä¸€æ¬¡ä»£è¡¨ä»€éº¼æ„æ€ï¼ŸA: åˆ©ç”¨å„ç¨® Traversal çš„æ–¹å¼ï¼Œå°‡æ¨¹éæ­·éä¸€éã€‚
3. è®“å°æ¨¹éæ­·å®Œçš„çµæœåœ¨å¤§æ¨¹éæ­·å®Œçš„çµæœä¹‹ä¸Šåšæœå°‹ã€‚
ä¸Šé¢é€™æ¨£çš„æ€è€ƒï¼ŒèƒŒå¾Œæœ‰ä¸€å€‹æœ€å¤§çš„å‡è¨­ï¼šéæ­·å‡ºä¾†çš„çµæœèƒ½å¤ è¢«æœå°‹ï¼Œä¸”æ¯ä¸€æ¬¡çµæœæ˜¯å”¯ä¸€çš„ã€‚ä½†æˆ‘å€‘å·²çŸ¥ PreOrderã€InOrderã€PostOrderã€Level Order çš„éæ­·çµæœéƒ½ä¸èƒ½é‚„åŸæˆå”¯ä¸€çš„æ¨¹ï¼Œé‚£éº¼å°±ä¸å¯èƒ½å¯ä»¥é€éæœå°‹çš„æ–¹å¼ä¾†æ‰¾ã€‚é›£é“çœŸçš„ä¸å¯è¡Œå—ï¼Ÿ  

å†ä»”ç´°å›æ†¶ä¸€ä¸‹ï¼Œéå¾€æ‰€å­¸çš„æ‰€æœ‰å¯èƒ½æ€§ï¼Œçªç„¶æƒ³åˆ°ï¼Œä¹‹å‰èªªä¸€ç¨®éæ­·ä¸è¡Œï¼Œé‚£ç”¨å…©ç¨®éæ­·ç¸½å¯ä»¥çµ„å›å”¯ä¸€çš„æ¨¹äº†å§ï¼Ÿä¾‹å¦‚ PreOrder çš„çµæœæœå°‹ä¸€éã€InOrder çš„çµæœæœå°‹ä¸€éï¼Œå¦‚æœå…©æ¬¡éƒ½æœ‰æœåˆ°ï¼Œå°±ä»£è¡¨å°æ¨¹å­˜åœ¨æ–¼å¤§æ¨¹ä¹‹ä¸­ã€‚  
ğŸ‘‰ ä¸Šé¢é€™æ¨£æƒ³æœ‰ä¸€å€‹æœ€å¤§çš„å‡è¨­ï¼Œå°±æ˜¯ `PreOrderMatch(å¤§æ¨¹, å°æ¨¹) && InOrderMatch(å¤§æ¨¹, å°æ¨¹)` è‹¥æ˜¯ `True` å°±æˆç«‹ã€‚
âŒ æœ‰ä¸€ç¨®ç‹€æ³å¯èƒ½æœƒå¤±æ•—ï¼Œç•¶æ¨¹æ˜¯ä¸‹é¢çš„ç‹€æ³æ™‚ï¼š

![Solution 2 - 1](solution2-1.png)

ä½†ä»”ç´°èªçœŸæ€è€ƒï¼Œä»–æœƒå¤±æ•—çš„åŸå› æ˜¯ä»€éº¼ï¼Ÿå¦‚æœèƒ½è§£æ±ºé€™å€‹å•é¡Œï¼Œæ˜¯ä¸æ˜¯æœ‰æ©Ÿæœƒï¼ŸA: æœ€ä¸»è¦æœƒçš„åŸå› åœ¨æ–¼ï¼Œè‘‰å­ç¯€é»å’Œéè‘‰å­ç¯€é»åˆ†ä¸æ¸…æ¥šå°è‡´çš„ï¼Œä»¥ä¸‹åœ–ç‚ºä¾‹ï¼ŒPreorder ç”¢ç”Ÿçš„ `123` æ˜¯ä¸‰å€‹è‘‰å­ç¯€é»åœ¨éæ­·æ™‚ç”¢ç”Ÿçš„ã€‚

![Solution 2 - 2](solution2-2.png)

æ‰€ä»¥å¦‚æœåªè¦å°‡æ‰€æœ‰ None çš„åœ°æ–¹ï¼Œä¹Ÿéƒ½çµ¦ä»–ä¸€å€‹å­—ç¬¦ `#`ï¼Œæˆ–è¨±å¯ä»¥è§£æ±ºé€™å€‹å•é¡Œï¼Œå¦‚ä¸‹åœ–æ‰€ç¤ºï¼š  

![Solution 2 - 3](solution2-3.png)

æœ€å¾Œä¾† Debug ä¸€ä¸‹ï¼ŒæŠŠä»¥ä¸‹é€™å€‹ç‹€æ³ä¹Ÿæ’é™¤æ‰ï¼Œå°±æ˜¯åœ¨ç¯€é»å‰é¢åŠ ä¸Šå­—ç¬¦ `^`

![Solution 2 - 4](solution2-4.png)

è®Šæˆä»¥ä¸‹

![Solution 2 - 5](solution2-5.png)

## æ–¹æ³• 2: String Matching

* æ­¥é©Ÿ
    1. åˆ©ç”¨ Preorder å°‡å¤§æ¨¹åšéæ­·ã€å°æ¨¹åšéæ­·ä¸¦åšå¾®èª¿ã€‚
    2. å°‡å…©å­—ä¸²åš KMPï¼ˆKnuth-Morris-Prattï¼‰ æ¼”ç®—æ³•ï¼Œæœå°‹å¤§æ¨¹å­—ä¸²æ˜¯å¦å­˜åœ¨å°æ¨¹å­—ä¸²ã€‚
    
* è¤‡é›œåº¦
    * æ™‚é–“è¤‡é›œåº¦: O(N + M)
    * ç©ºé–“è¤‡é›œåº¦: O(N + M)
    * `N` ç‚ºå¤§æ¨¹çš„ç¯€é»æ•¸ã€ `M` ç‚ºå°æ¨¹çš„ç¯€é»æ•¸ã€‚
